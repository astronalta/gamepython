# jgtest exec on
# Tests that control structures are usable as expressions

Val < Value {
    str String
    @init(pstr String) {
        str = pstr
    }
}

test_cond() {
#    Io::println("test_cond")
#    x = if true { "hello" } else { "false" }
#    Io::println(x)
#    Io::println(if false { "hello" } else { "false" })
#
#    y = if true { Val("hello") } else { Val("goodbye") }
#    Io::println(y.str)
    Io::println(if false { Val("hello") } else { Val("goodbye") }.str)
#
#    z = if true {
#        Val("one")
#    } else if true {
#        Val("two")
#    } else {
#        Val("three")
#    }
#    Io::println(x.str)
}

test_let() {
#    Io::println("test_let")
#    x = let y = "bob" { y }
#    Io::println(x)
#    Io::println(let y = "bill" { "mike" }.str)
#    Io::println("")
#
#    Io::println(let y = "bill" { Val("mike") }.str)
}

test_match() {
#    Io::println("test_match")
#    x = match 1 {
#    with 2: "hello"
#    with 3: "bob"
#    with 1: "nothing"
#    }
#    Io::println(x)
#    Io::println(match 7 { with 8: "fail"})
}

main() Int {
    test_cond()
    test_let()
    test_match()
    ret 0
}
